<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Blf-firmware : Firmware for ATtiny13A based flashlight drivers">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Blf-firmware</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/JCapSolutions/blf-firmware">View on GitHub</a>

          <h1 id="project_title">Blf-firmware</h1>
          <h2 id="project_tagline">Firmware for ATtiny13A based flashlight drivers</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/JCapSolutions/blf-firmware/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/JCapSolutions/blf-firmware/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>These are programs that I have developed in my spare time to get my flashlights working the way I want them to, and to provide an easy way for other flashlight enthusiasts to customize their UI's.  While a lot of it is original, 99% of the credit for the code goes to Tido and DrJones, and a ton of credit goes out to many great members of BLF for implementation ideas (especially off-time memory).  Feel free to use the programs however you wish.</p>

<p>Here's a link to the discussion about the firmware, with more detail about what it does provided by RMM - <a href="http://budgetlightforum.com/node/29150">http://budgetlightforum.com/node/29150</a></p>

<p>If you're new to flashing your own drivers, check out this amazing page <a href="http://flashlightwiki.com/AVR_Drivers">http://flashlightwiki.com/AVR_Drivers</a></p>

<h2>
<a id="how-to-download" class="anchor" href="#how-to-download" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to download</h2>

<p>To download the latest versions ("master") of all of the different firmware programs, just click the "tar.gz" or ".zip" images above.  If you wish to download just one program, click "View on GitHub", select the folder you want, and download the appropriate file(s).</p>

<p>As for downloading previous versions, if for some reason you don't want the latest, well, that's a little more difficult as I didn't do any "releases" or tagging.  You can click on the "Browse commits for this branch" and see what changes were made, and select a commit to view the source at that point in time.</p>

<h2>
<a id="what-do-these-programs-do" class="anchor" href="#what-do-these-programs-do" aria-hidden="true"><span class="octicon octicon-link"></span></a>What do these programs do?</h2>

<h3>
<a id="star" class="anchor" href="#star" aria-hidden="true"><span class="octicon octicon-link"></span></a>STAR</h3>

<p><strong>Used for:</strong>  NANJG driver in forward or reverse clicky lights without a secondary momentary switch</p>

<p><strong>Features:</strong>
Ability to solder stars to change modes:
<br>1. DUMMY STAR<br>
2. Moon if connected and alternate PWM output not used<br>
3. H to L if connected, L to H if not<br>
4. Memory enabled if not connected<br></p>

<ul>
<li>18 kHz PWM ("fast") or 9.4 kHz PWM ("phase-correct", usually used for custom FET driver versions)</li>
<li>Ability to enable phase-correct PWM up to a defined output level, then switch to fast PWM (allows for more consistent lower lows, but prevents the "whine" that 94. kHz can cause)</li>
<li>Ability to utilize a second PWM output that is the only output used under a defined output level (allows for an individual 7135 to be powered up for a very low moonlight, without appropriate circuit layout)</li>
<li>Option to have a turbo mode with the ability to step down to a lower output at a specified timeout, or gradually ramp down to a lower output.</li>
<li>Mode lock time (the time the light needs to be on in order for the current mode to be saved)</li>
<li>Battery voltage detection with indicating flashes and output step down by half when battery is getting low</li>
</ul>

<h3>
<a id="star_off_time" class="anchor" href="#star_off_time" aria-hidden="true"><span class="octicon octicon-link"></span></a>STAR_off_time</h3>

<p><strong>Used for:</strong>  NANJG driver in forward or reverse clicky lights without a secondary momentary switch. REQUIRES additional capacitor.</p>

<p><strong>Features:</strong>
Ability to solder stars to change modes:
<br>1. DUMMY STAR<br>
2. Moon if connected and alternate PWM output not used<br>
3. H to L if connected, L to H if not<br>
4. Capacitor for off-time determination (I use Digikey.com part number 1276-1029-1-ND, which is a ceramic 1uF 0805 X7R)<br></p>

<ul>
<li>This program has the same features as STAR, but with the next mode determination done by calculating how long the light has been off instead of how long it has been on.  IMO, this makes for a much more intuitive UI, as a single "blip" of a reverse clicky while the light is on will move you to the next mode, and a very short "blip" of turning the light on with a forward clicky will not cause the light to start up in the next mode a few seconds later.</li>
</ul>

<h3>
<a id="star_momentary" class="anchor" href="#star_momentary" aria-hidden="true"><span class="octicon octicon-link"></span></a>STAR_momentary</h3>

<p><strong>Used for:</strong>  NANJG driver in always-on lights with a single momentary switch, like the SRK</p>

<p><strong>Features:</strong>
Ability to solder stars to change modes:
<br>1. DUMMY STAR<br>
2. Not used<br>
3. H to L if connected, L to H if not<br>
4. Switch input<br></p>

<ul>
<li>Short presses will move up through the modes, cycling to "off" and then around again</li>
<li>Long presses will move backwards through the modes</li>
<li>Define any number of modes you wish (within program space limitation)</li>
<li>Ability to define mode order using Star 3</li>
<li>18 kHz PWM ("fast") or 9.4 kHz PWM ("phase-correct", usually used for custom FET driver versions) definable <em>per output mode</em>
</li>
<li>Ability to utilize a second PWM output definable <em>per output mode</em> (allows for an individual 7135 to be powered up for a very low moonlight, without appropriate circuit layout)</li>
<li>Option to have a turbo mode with the ability to step down to a lower output at a specified timeout, or gradually ramp down to a lower output.</li>
<li>Battery voltage detection with indicating flashes and output step down to previous mode when battery is getting low</li>
</ul>

<h3>
<a id="star_dual_switch" class="anchor" href="#star_dual_switch" aria-hidden="true"><span class="octicon octicon-link"></span></a>STAR_dual_switch</h3>

<p><strong>Used for:</strong>  NANJG driver in lights with a power switch (usually a rear clicky) and secondary momentary switch</p>

<p><strong>Features:</strong>
Ability to solder stars to change modes:
<br>1. DUMMY STAR<br>
2. H to L if connected, L to H if not<br>
3. Memory if not connected<br>
4. Switch input<br></p>

<ul>
<li>Master power switch (usually a rear clicky) will simply turn the light on and off - it won't change modes</li>
<li>Short presses will move up through the modes, cycling around again</li>
<li>Long presses will move backwards through the modes</li>
<li>Define any number of modes you wish (within program space limitation)</li>
<li>Ability to define mode order using Star 2</li>
<li>18 kHz PWM ("fast")</li>
<li>Option to have a turbo mode that will step down to a lower output at a specified timeout</li>
<li>Battery voltage detection with indicating flashes and output step down to previous mode when battery is getting low</li>
</ul>

<p>This program has not been updated with the latest features (PWM mode selection, dual-PWM outputs, turbo ramp down) of the other programs, as I haven't even used this program in any of my lights yet.  If you want these features added and I can try and get it done.</p>

<h2>
<a id="questions" class="anchor" href="#questions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Questions?</h2>

<p>Visit this BudgetLightForum thread and post them up, or message me (JonnyC)!  <a href="http://budgetlightforum.com/node/29150">http://budgetlightforum.com/node/29150</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Blf-firmware maintained by <a href="https://github.com/JCapSolutions">JCapSolutions</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
