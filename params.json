{"name":"Blf-firmware","tagline":"Firmware for ATtiny13A based flashlight drivers","body":"These are programs that I have developed in my spare time to get my flashlights working the way I want them to, and to provide an easy way for other flashlight enthusiasts to customize their UI's.  While a lot of it is original, 99% of the credit for the code goes to Tido and DrJones, and a ton of credit goes out to many great members of BLF for implementation ideas (especially off-time memory).  Feel free to use the programs however you wish.\r\n\r\nHere's a link to the discussion about the firmware, with more detail about what it does provided by RMM - [http://budgetlightforum.com/node/29150](http://budgetlightforum.com/node/29150)\r\n\r\nIf you're new to flashing your own drivers, check out this amazing page [http://flashlightwiki.com/AVR_Drivers](http://flashlightwiki.com/AVR_Drivers)\r\n\r\n## How to download\r\nTo download the latest versions (\"master\") of all of the different firmware programs, just click the \"tar.gz\" or \".zip\" images above.  If you wish to download just one program, click \"View on GitHub\", select the folder you want, and download the appropriate file(s).\r\n\r\nAs for downloading previous versions, if for some reason you don't want the latest, well, that's a little more difficult as I didn't do any \"releases\" or tagging.  You can click on the \"Browse commits for this branch\" and see what changes were made, and select a commit to view the source at that point in time.\r\n\r\n## What do these programs do?\r\n\r\n### STAR\r\n\r\n**Used for:**  NANJG driver in forward or reverse clicky lights without a secondary momentary switch\r\n\r\n**Features:**\r\nAbility to solder stars to change modes:\r\n<br>1. DUMMY STAR<br>\r\n2. Enable moonlight mode if connected and alternate PWM output not used<br>\r\n3. Specify mode order - H to L if connected, L to H if not<br>\r\n4. Disable mode memory if connected<br>\r\n\r\n* 18 kHz PWM (\"fast\") or 9.4 kHz PWM (\"phase-correct\", usually used for custom FET driver versions)\r\n* Ability to enable phase-correct PWM up to a defined output level, then switch to fast PWM (allows for more consistent lower lows, but prevents the \"whine\" that 9.4 kHz can cause)\r\n* Ability to utilize a second PWM output that is the only output used under a defined output level (allows for an individual 7135 to be powered up for a very low moonlight, without appropriate circuit layout)\r\n* Option to have a turbo mode with the ability to step down to a lower output at a specified timeout, or gradually ramp down to a lower output.\r\n* Mode lock time (the time the light needs to be on in order for the current mode to be saved)\r\n* Battery voltage detection with indicating flashes and output step down by half when battery is getting low\r\n\r\n### STAR_off_time\r\n\r\n**Used for:**  NANJG driver in forward or reverse clicky lights without a secondary momentary switch. REQUIRES additional capacitor.\r\n\r\n**Features:**\r\nAbility to solder stars to change modes:\r\n<br>1. DUMMY STAR<br>\r\n2. Enable moonlight mode if connected and alternate PWM output not used<br>\r\n3. Specify mode order - H to L if connected, L to H if not<br>\r\n4. Capacitor for off-time determination (I use Digikey.com part number 1276-1029-1-ND, which is a ceramic 1uF 0805 X7R)<br>\r\n\r\n* This program has the same features as STAR, but with the next mode determination done by calculating how long the light has been off instead of how long it has been on.  IMO, this makes for a much more intuitive UI, as a single \"blip\" of a reverse clicky while the light is on will move you to the next mode, and a very short \"blip\" of turning the light on with a forward clicky will not cause the light to start up in the next mode a few seconds later.\r\n\r\n### STAR_momentary\r\n\r\n**Used for:**  NANJG driver in always-on lights with a single momentary switch, like the SRK\r\n\r\n**Features:**\r\nAbility to solder stars to change modes:\r\n<br>1. DUMMY STAR<br>\r\n2. Not used<br>\r\n3. Specify mode order - H to L if connected, L to H if not<br>\r\n4. Switch input<br>\r\n\r\n* Short presses will move up through the modes, cycling to \"off\" and then around again\r\n* Long presses will move backwards through the modes\r\n* Define any number of modes you wish (within program space limitation)\r\n* Ability to define mode order using Star 3\r\n* 18 kHz PWM (\"fast\") or 9.4 kHz PWM (\"phase-correct\", usually used for custom FET driver versions) definable _per output mode_\r\n* Ability to utilize a second PWM output definable _per output mode_ (allows for an individual 7135 to be powered up for a very low moonlight, without appropriate circuit layout)\r\n* Option to have a turbo mode with the ability to step down to a lower output at a specified timeout\r\n* Battery voltage detection with indicating flashes and output step down to previous mode when battery is getting low\r\n\r\n### STAR_dual_switch\r\n\r\n**Used for:**  NANJG driver in lights with a power switch (usually a rear clicky) and secondary momentary switch\r\n\r\n**Features:**\r\nAbility to solder stars to change modes:\r\n<br>1. DUMMY STAR<br>\r\n2. Specify mode order - H to L if connected, L to H if not<br>\r\n3. Disable mode memory if connected<br>\r\n4. Switch input<br>\r\n\r\n* Master power switch (usually a rear clicky) will simply turn the light on and off - it won't change modes\r\n* Short presses will move up through the modes, cycling around again\r\n* Long presses will move backwards through the modes\r\n* Define any number of modes you wish (within program space limitation)\r\n* Ability to define mode order using Star 2\r\n* 18 kHz PWM (\"fast\")\r\n* Option to have a turbo mode that will step down to a lower output at a specified timeout\r\n* Battery voltage detection with indicating flashes and output step down to previous mode when battery is getting low\r\n\r\nThis program has not been updated with the latest features (PWM mode selection, dual-PWM outputs, turbo ramp down) of the other programs, as I haven't even used this program in any of my lights yet.  If you want these features added and I can try and get it done.\r\n\r\n## Questions?\r\nVisit this BudgetLightForum thread and post them up, or message me (JonnyC)!  [http://budgetlightforum.com/node/29150](http://budgetlightforum.com/node/29150)","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}